---
layout: post
categories: blog

---

temp.cpp

```c++
int add(int p1,int p2) {
    int p3 = p1+p2;
    return p3;
}
```



#### cpp file -> AST

```bash
$ clang -Xclang -ast-dump ./temp.cpp
TranslationUnitDecl 0xf1b058 <<invalid sloc>> <invalid sloc>
|-TypedefDecl 0xf1b930 <<invalid sloc>> <invalid sloc> implicit __int128_t '__int128'
| `-BuiltinType 0xf1b5f0 '__int128'
|-TypedefDecl 0xf1b9a0 <<invalid sloc>> <invalid sloc> implicit __uint128_t 'unsigned __int128'
| `-BuiltinType 0xf1b610 'unsigned __int128'
|-TypedefDecl 0xf1bd18 <<invalid sloc>> <invalid sloc> implicit __NSConstantString '__NSConstantString_tag'
| `-RecordType 0xf1ba90 '__NSConstantString_tag'
|   `-CXXRecord 0xf1b9f8 '__NSConstantString_tag'
|-TypedefDecl 0xf1bdb0 <<invalid sloc>> <invalid sloc> implicit __builtin_ms_va_list 'char *'
| `-PointerType 0xf1bd70 'char *'
|   `-BuiltinType 0xf1b0f0 'char'
|-TypedefDecl 0xf58de8 <<invalid sloc>> <invalid sloc> implicit __builtin_va_list '__va_list_tag [1]'
| `-ConstantArrayType 0xf58d90 '__va_list_tag [1]' 1 
|   `-RecordType 0xf1bea0 '__va_list_tag'
|     `-CXXRecord 0xf1be08 '__va_list_tag'
`-FunctionDecl 0xf58fb0 <./temp.cpp:1:1, line:4:1> line:1:5 add 'int (int, int)'
  |-ParmVarDecl 0xf58e58 <col:9, col:13> col:13 used p1 'int'
  |-ParmVarDecl 0xf58ed8 <col:16, col:20> col:20 used p2 'int'
  `-CompoundStmt 0xf59218 <col:24, line:4:1>
    |-DeclStmt 0xf591b8 <line:2:5, col:19>
    | `-VarDecl 0xf590c0 <col:5, col:17> col:9 used p3 'int' cinit
    |   `-BinaryOperator 0xf59198 <col:14, col:17> 'int' '+'
    |     |-ImplicitCastExpr 0xf59168 <col:14> 'int' <LValueToRValue>
    |     | `-DeclRefExpr 0xf59128 <col:14> 'int' lvalue ParmVar 0xf58e58 'p1' 'int'
    |     `-ImplicitCastExpr 0xf59180 <col:17> 'int' <LValueToRValue>
    |       `-DeclRefExpr 0xf59148 <col:17> 'int' lvalue ParmVar 0xf58ed8 'p2' 'int'
    `-ReturnStmt 0xf59208 <line:3:5, col:12>
      `-ImplicitCastExpr 0xf591f0 <col:12> 'int' <LValueToRValue>
        `-DeclRefExpr 0xf591d0 <col:12> 'int' lvalue Var 0xf590c0 'p3' 'int'
$ # ......
```

ast format

```bash
TranslationUnitDecl <<invalid sloc>> <invalid sloc>
|-TypedefDecl <<invalid sloc>> <invalid sloc> implicit __int128_t '__int128'
| `-BuiltinType '__int128'
|-TypedefDecl <<invalid sloc>> <invalid sloc> implicit __uint128_t 'unsigned __int128'
| `-BuiltinType 'unsigned __int128'
|-TypedefDecl <<invalid sloc>> <invalid sloc> implicit __NSConstantString '__NSConstantString_tag'
| `-RecordType 0xf1ba90 '__NSConstantString_tag'
|   `-CXXRecord 0xf1b9f8 '__NSConstantString_tag'
|-TypedefDecl <<invalid sloc>> <invalid sloc> implicit __builtin_ms_va_list 'char *'
| `-PointerType 'char *'
|   `-BuiltinType 0xf1b0f0 'char'
|-TypedefDecl <<invalid sloc>> <invalid sloc> implicit __builtin_va_list '__va_list_tag [1]'
| `-ConstantArrayType '__va_list_tag [1]' 1 
|   `-RecordType '__va_list_tag'
|     `-CXXRecord '__va_list_tag'
`-FunctionDecl add 'int (int, int)'
  |-ParmVarDecl used p1 'int'
  |-ParmVarDecl used p2 'int'
  `-CompoundStmt
    |-DeclStmt
    | `-VarDecl used p3 'int' cinit
    |   `-BinaryOperator 'int' '+'
    |     |-ImplicitCastExpr 'int' <LValueToRValue>
    |     | `-DeclRefExpr 'int' lvalue ParmVar 'p1' 'int'
    |     `-ImplicitCastExpr 'int' <LValueToRValue>
    |       `-DeclRefExpr 'int' lvalue ParmVar 'p2' 'int'
    `-ReturnStmt
      `-ImplicitCastExpr 'int' <LValueToRValue>
        `-DeclRefExpr 'int' lvalue Var 'p3' 'int'
```



#### cpp file -> IR

```bash
$ clang++ -S -emit-llvm -o temp.ir temp.cpp
```

